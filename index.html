!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EL JUEGO DE EVA KPOP - GANANCIAS CLP</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Archivo+Black&family=Archivo:wght@400;700;900&family=Syne:wght@800&display=swap');
        
        body { 
            font-family: 'Archivo', sans-serif; 
            background: #000;
            color: #fff;
            margin: 0;
            overflow-x: hidden;
            /* Subida de fuente base en un 10% (aprox 17.6px de 16px est√°ndar) */
            font-size: 1.1rem;
            background-image: url('https://ibb.co/d4cyDRJN');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            background-repeat: no-repeat;
        }

        /* Capa de oscurecimiento */
        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            z-index: -1;
        }

        .font-header { font-family: 'Archivo Black', sans-serif; }
        .font-syne { font-family: 'Syne', sans-serif; }

        .marquee-container {
            background: #ff007f;
            overflow: hidden;
            white-space: nowrap;
            padding: 10px 0;
            border-bottom: 2px solid #fff;
        }

        .marquee-text {
            display: inline-block;
            animation: marquee 20s linear infinite;
            font-family: 'Syne', sans-serif;
            font-weight: 800;
            text-transform: uppercase;
            font-size: 1.32rem; /* +10% de 1.2rem */
            color: #fff;
        }

        @keyframes marquee {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }

        .neon-text {
            color: #ff007f;
            text-shadow: 0 0 15px rgba(255, 0, 127, 0.6);
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.07);
            border: 1px solid rgba(255, 255, 255, 0.12);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
        }

        .reward-card {
            border-left: 4px solid #facc15;
            background: linear-gradient(90deg, rgba(250, 204, 21, 0.15) 0%, transparent 100%);
        }

        .task-done {
            border-left: 4px solid #ff007f !important;
            background: rgba(255, 0, 127, 0.1) !important;
        }

        .tab-active {
            background: #fff;
            color: #000;
            font-weight: 900;
        }

        /* Ajuste de fuentes espec√≠ficas +10% */
        .money-label { font-size: 12.1px; }
        .money-amount { font-size: 1.375rem; }
        .task-label { font-size: 0.825rem; }
        .task-pts { font-size: 10px; }
    </style>
</head>
<body class="pb-40">

    <div class="marquee-container sticky top-0 z-50">
        <div class="marquee-text italic">
            ‚Ä¢ GANA PUNTOS ‚Ä¢ AHORRA PARA EL FUTURO ‚Ä¢ DISFRUTA TU GIRA ‚Ä¢ D√çA PERFECTO ‚Ä¢ K-POP STAR ‚Ä¢
        </div>
    </div>

    <header class="p-8 text-center border-b border-white/5 bg-zinc-950/60 backdrop-blur-md">
        <h1 class="font-header text-4xl italic tracking-tighter neon-text mb-4">EVA K-POP</h1>
        <div class="inline-block glass-card px-8 py-4 rounded-3xl">
            <span id="total-pts" class="font-header text-6xl italic">0</span>
            <p class="text-[11px] font-black text-pink-500 uppercase tracking-[0.3em] mt-2">Puntos Totales</p>
        </div>
    </header>

    <main class="max-w-md mx-auto p-4 mt-4 relative z-10">
        <nav class="flex mb-8 gap-1.5 bg-white/10 p-1 rounded-2xl border border-white/10 backdrop-blur-xl">
            <button onclick="App.setTab('tasks')" id="tab-tasks" class="flex-1 py-3 rounded-xl font-black uppercase italic text-[11px] tab-active">Misiones</button>
            <button onclick="App.setTab('rewards')" id="tab-rewards" class="flex-1 py-3 rounded-xl font-black uppercase italic text-[11px] opacity-60">Premios</button>
            <button onclick="App.setTab('history')" id="tab-history" class="flex-1 py-3 rounded-xl font-black uppercase italic text-[11px] opacity-60">Historial</button>
        </nav>

        <div id="main-content" class="space-y-3"></div>
    </main>

    <div class="fixed bottom-0 left-0 w-full p-6 bg-black/80 backdrop-blur-xl border-t border-white/10 z-50">
        <div class="max-w-md mx-auto grid grid-cols-2 gap-3">
            <button onclick="App.quickAdjust(20)" class="bg-yellow-400 text-black font-black py-4 rounded-2xl uppercase text-xs italic shadow-lg shadow-yellow-400/20">
                D√≠a Perfecto +20
            </button>
            <button onclick="App.quickAdjust(-5)" class="bg-zinc-800 text-white font-black py-4 rounded-2xl uppercase text-xs italic">
                Falta Grave -5
            </button>
        </div>
    </div>

    <script>
        const App = {
            data: {
                total: 0,
                today: { id: '', points: {}, totalDay: 0 },
                allHistory: [],
                tab: 'tasks'
            },

            POINT_VALUE: 10,

            financeConfig: [
                { id: 'gastar', label: 'Libres para usar', pct: 0.40, color: 'text-pink-400', desc: 'Libre disposici√≥n' },
                { id: 'gastos', label: 'Gastos', pct: 0.40, color: 'text-pink-300', desc: 'Necesidades' },
                { id: 'ahorro', label: 'Ahorro', pct: 0.10, color: 'text-white', desc: 'Para el futuro' },
                { id: 'compartir', label: 'Compartir', pct: 0.10, color: 'text-white/60', desc: 'Ayudar/Regalar' }
            ],

            tasks: [
                { id: 'dientes', label: 'Lavarse los dientes', pts: 1, limit: 6, icon: 'üöø' },
                { id: 'dormir', label: 'Dormir sola', pts: 1, limit: 1, icon: 'üåô' },
                { id: 'banarse', label: 'Ba√±arse Sola', pts: 1, limit: 1, icon: 'üöø' },
                { id: 'vestirse', label: 'Vestirse Sola', pts: 1, limit: 1, icon: 'üëó' },
                { id: 'tarea', label: 'Tareas escolares', pts: 1, limit: 1, icon: '‚úèÔ∏è' },
                { id: 'leer', label: 'Leer', pts: 1, limit: 6, icon: 'üìñ' },
                { id: 'crear', label: 'Crear algo', pts: 1, limit: 2, icon: 'üé®' },
                { id: 'comida', label: 'Comida balanceada', pts: 1, limit: 3, icon: 'ü•¶' },
                { id: 'honesto', label: 'D√≠a honesto', pts: 5, limit: 1, icon: 'üòá' },
                { id: 'gritos', label: 'D√≠a sin gritos', pts: 5, limit: 1, icon: 'ü§´' }
            ],

            goals: {
                weekly: [
                    { label: 'Pel√≠cula Extra', points: 100 },
                    { label: 'Helado Especial', points: 180 }
                ],
                monthly: [
                    { label: 'Regalo Sorpresa', points: 400 },
                    { label: 'Paseo + Regalo', points: 800 }
                ]
            },

            init() {
                const saved = localStorage.getItem('eva_finance_kpop_v2');
                if (saved) this.data = JSON.parse(saved);
                
                const todayId = new Date().toLocaleDateString('es-ES', { weekday: 'long', day: 'numeric', month: 'long' });
                
                if (this.data.today.id !== todayId) {
                    if (this.data.today.id) this.data.allHistory.push({...this.data.today});
                    this.data.today = { id: todayId, points: {}, totalDay: 0 };
                }
                
                this.render();
            },

            save() {
                localStorage.setItem('eva_finance_kpop_v2', JSON.stringify(this.data));
                this.render();
            },

            adjustPoints(taskId, amount) {
                const task = this.tasks.find(t => t.id === taskId);
                const current = this.data.today.points[taskId] || 0;
                
                if (amount > 0 && current >= task.limit) return;
                if (amount < 0 && current <= 0) return;

                const change = amount > 0 ? 1 : -1;
                this.data.today.points[taskId] = current + change;
                this.data.today.totalDay += (change * task.pts);
                this.data.total += (change * task.pts);
                this.save();
            },

            quickAdjust(pts) {
                this.data.total += pts;
                this.data.today.totalDay += pts;
                this.save();
            },

            setTab(t) {
                this.data.tab = t;
                this.render();
            },

            formatCLP(val) {
                return new Intl.NumberFormat('es-CL', { 
                    style: 'currency', 
                    currency: 'CLP',
                    minimumFractionDigits: 0 
                }).format(val);
            },

            render() {
                document.getElementById('total-pts').innerText = this.data.total;
                const el = document.getElementById('main-content');
                el.innerHTML = '';

                ['tasks', 'rewards', 'history'].forEach(t => {
                    const btn = document.getElementById(`tab-${t}`);
                    if (btn) btn.className = this.data.tab === t 
                        ? 'flex-1 py-3 rounded-xl font-black uppercase italic text-[11px] tab-active' 
                        : 'flex-1 py-3 rounded-xl font-black uppercase italic text-[11px] opacity-60';
                });

                if (this.data.tab === 'tasks') {
                    this.tasks.forEach(t => {
                        const count = this.data.today.points[t.id] || 0;
                        const isMaxed = count >= t.limit;
                        const div = document.createElement('div');
                        div.className = `glass-card p-4 rounded-2xl flex justify-between items-center ${isMaxed ? 'task-done' : ''}`;
                        div.innerHTML = `
                            <div class="flex items-center gap-3">
                                <span class="text-3xl">${t.icon}</span>
                                <div>
                                    <h3 class="font-bold uppercase italic task-label tracking-tight">${t.label}</h3>
                                    <span class="text-pink-500 font-black task-pts uppercase">${count} / ${t.limit} ‚Ä¢ ${t.pts} pts</span>
                                </div>
                            </div>
                            <div class="flex gap-2">
                                <button onclick="App.adjustPoints('${t.id}', -1)" class="w-11 h-11 bg-white/10 rounded-xl border border-white/10">-</button>
                                <button onclick="App.adjustPoints('${t.id}', 1)" class="w-11 h-11 bg-pink-600 rounded-xl font-bold">+</button>
                            </div>
                        `;
                        el.appendChild(div);
                    });
                } 
                else if (this.data.tab === 'rewards') {
                    const sectionTitle = (txt) => `<h3 class="text-[12.1px] font-black text-yellow-400 uppercase tracking-[0.3em] mb-3 mt-6 ml-2">${txt}</h3>`;
                    
                    el.innerHTML += sectionTitle('Premios Semanales');
                    this.goals.weekly.forEach(g => {
                        const progress = Math.min(100, (this.data.total / g.points) * 100);
                        el.innerHTML += `
                            <div class="glass-card p-4 rounded-2xl mb-2 reward-card">
                                <div class="flex justify-between items-center mb-2">
                                    <span class="font-bold uppercase italic text-[12.1px]">${g.label}</span>
                                    <span class="font-black text-sm text-yellow-400">${g.points} PTS</span>
                                </div>
                                <div class="w-full bg-white/10 h-2 rounded-full overflow-hidden">
                                    <div class="bg-yellow-400 h-full" style="width: ${progress}%"></div>
                                </div>
                            </div>
                        `;
                    });

                    const totalMoney = this.data.total * this.POINT_VALUE;
                    el.innerHTML += `<h3 class="text-[12.1px] font-black text-pink-500 uppercase tracking-[0.3em] mb-3 mt-8 ml-2">Ganancias (CLP)</h3>`;
                    
                    const moneyBox = document.createElement('div');
                    moneyBox.className = 'glass-card rounded-3xl p-6 border-pink-500/20 mb-6 text-center';
                    moneyBox.innerHTML = `
                        <p class="text-[11px] font-black text-white/40 uppercase mb-1 tracking-widest">Saldo Real Total</p>
                        <h2 class="text-4xl font-header italic neon-text">${this.formatCLP(totalMoney)}</h2>
                    `;
                    el.appendChild(moneyBox);

                    const grid = document.createElement('div');
                    grid.className = 'grid grid-cols-1 gap-2';
                    this.financeConfig.forEach(conf => {
                        const amount = totalMoney * conf.pct;
                        grid.innerHTML += `
                            <div class="glass-card px-5 py-5 rounded-2xl flex justify-between items-center border-white/5">
                                <div>
                                    <h4 class="font-black uppercase italic money-label ${conf.color}">${conf.label} (${conf.pct * 100}%)</h4>
                                    <p class="text-[10px] text-white/30 uppercase tracking-tight">${conf.desc}</p>
                                </div>
                                <span class="font-header money-amount italic text-white">${this.formatCLP(amount)}</span>
                            </div>
                        `;
                    });
                    el.appendChild(grid);
                } 
                else if (this.data.tab === 'history') {
                    const hist = [...this.data.allHistory].reverse();
                    el.innerHTML += `<h3 class="text-[12.1px] font-black text-pink-500 uppercase tracking-widest mb-4 ml-2">Logros Recientes</h3>`;
                    
                    el.innerHTML += `
                        <div class="glass-card p-5 rounded-3xl border-pink-500/30 mb-4 bg-pink-500/10">
                            <div class="flex justify-between items-end">
                                <div>
                                    <span class="bg-pink-500 text-[9px] font-black px-2 py-0.5 rounded mb-2 inline-block">HOY</span>
                                    <h4 class="font-bold italic uppercase text-base">${this.data.today.id}</h4>
                                </div>
                                <span class="font-header text-3xl text-white">${this.data.today.totalDay} <span class="text-[11px]">PTS</span></span>
                            </div>
                        </div>
                    `;

                    hist.forEach(day => {
                        el.innerHTML += `
                            <div class="glass-card p-4 rounded-2xl flex justify-between items-center mb-2 opacity-70">
                                <span class="text-[11px] font-bold uppercase italic">${day.id}</span>
                                <span class="font-header text-xl text-white/80">${day.totalDay} PTS</span>
                            </div>
                        `;
                    });
                }
            }
        };

        window.onload = () => App.init();
    </script>
</body>
</html>
