<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EL JUEGO DE EVA KPOP</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Archivo+Black&family=Archivo:wght@400;700;900&family=Syne:wght@800&display=swap');
        
        body { 
            font-family: 'Archivo', sans-serif; 
            background: #000;
            color: #fff;
            margin: 0;
            overflow-x: hidden;
            /* Tama√±o base reducido un 20% respecto a la versi√≥n anterior */
            font-size: 1rem; 
        }

        .font-header { font-family: 'Archivo Black', sans-serif; }
        .font-syne { font-family: 'Syne', sans-serif; }

        .marquee-container {
            background: #ff007f;
            overflow: hidden;
            white-space: nowrap;
            padding: 12px 0;
            border-bottom: 4px solid #fff;
        }

        .marquee-text {
            display: inline-block;
            animation: marquee 25s linear infinite;
            font-family: 'Syne', sans-serif;
            font-weight: 800;
            text-transform: uppercase;
            font-size: 1.8rem; /* Reducido */
            letter-spacing: 0.1em;
            color: #ffffff;
        }

        @keyframes marquee {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }

        .main-stage {
            background: linear-gradient(180deg, #000 0%, #1a001a 100%);
            min-height: 100vh;
        }

        .neon-text {
            color: #ff007f;
            text-shadow: 0 0 20px rgba(255, 0, 127, 0.8);
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
        }

        .task-done {
            border-left: 8px solid #ff007f !important;
            background: rgba(255, 0, 127, 0.1) !important;
        }

        .btn-plus {
            background: #ff007f;
        }
        
        .btn-plus:disabled {
            background: #333;
            opacity: 0.3;
            cursor: not-allowed;
        }

        .tab-active {
            background: #fff;
            color: #000;
            font-weight: 900;
        }

        .big-number {
            font-size: 6rem; /* Reducido de 8rem */
            line-height: 1;
            letter-spacing: -0.05em;
        }

        .label-lg {
            font-size: 1.25rem; /* Ajustado */
            line-height: 1.2;
        }

        .btn-control {
            width: 55px;
            height: 55px;
            font-size: 1.5rem;
        }

        /* Estilo para el bot√≥n amarillo de bono */
        .btn-perfect-day {
            background: #ffea00;
            color: #000;
            box-shadow: 0 0 15px rgba(255, 234, 0, 0.4);
        }
    </style>
</head>
<body class="main-stage pb-48">

    <div class="marquee-container sticky top-0 z-[60]">
        <div class="marquee-text">
            EVA K-POP TOUR ‚Ä¢ D√çA PERFECTO ‚Ä¢ RECIBES LO QUE DAS ‚Ä¢ CREA ALGO ‚Ä¢ LEE ‚Ä¢ TERMINA LO QUE EMPIECES ‚Ä¢
        </div>
    </div>

    <header class="p-8 border-b border-white/10 bg-black/50">
        <div class="max-w-md mx-auto flex flex-col items-center text-center">
            <h1 class="font-header text-4xl italic tracking-tighter neon-text mb-4">MI DI A DIA</h1>
            
            <div class="flex flex-col items-center">
                <span id="total-pts" class="font-header big-number italic">0</span>
                <span class="text-lg font-black text-pink-500 uppercase tracking-[0.3em] mt-2">Puntos Totales</span>
            </div>
        </div>
    </header>

    <main class="max-w-md mx-auto p-4 mt-6">
        <nav class="flex mb-8 gap-2 bg-white/5 p-1.5 rounded-full border border-white/10">
            <button onclick="App.setTab('tasks')" id="tab-tasks" class="flex-1 py-4 rounded-full font-black uppercase italic text-sm tracking-widest tab-active">Misiones</button>
            <button onclick="App.setTab('rewards')" id="tab-rewards" class="flex-1 py-4 rounded-full font-black uppercase italic text-sm tracking-widest opacity-40">Premios</button>
        </nav>

        <div id="main-content" class="space-y-4"></div>
    </main>

    <!-- Botones de acci√≥n inferior m√°s peque√±os -->
    <div class="fixed bottom-0 left-0 w-full p-6 bg-black/95 border-t-2 border-pink-500 z-[100]">
        <div class="max-w-md mx-auto grid grid-cols-2 gap-3">
            <button onclick="App.quickAdjust(20, 'Bono + 20')" class="btn-perfect-day font-black py-4 rounded-2xl uppercase text-base italic flex items-center justify-center gap-2">
                <span>ü•≥</span> Bono +20
            </button>
            <button onclick="App.quickAdjust(-5, 'Falta -5')" class="bg-zinc-800 text-white font-black py-4 rounded-2xl uppercase text-base italic">
                Falta -5
            </button>
        </div>
    </div>

    <script>
        const App = {
            data: {
                total: 0,
                today: {},
                tab: 'tasks'
            },

            tasks: [
                { id: 'dientes', label: 'Lavar los dientes', pts: 1, limit: 6, icon: 'ü™•' },
                { id: 'leer', label: 'Leer', pts: 1, limit: 6, icon: 'üìñ' },
                { id: 'comida', label: 'Comida balanceada', pts: 1, limit: 3, icon: 'ü•¶' },
                { id: 'crear', label: 'Crear algo', pts: 1, limit: 2, icon: 'üé®' },
                { id: 'gritos', label: 'D√≠a sin gritos', pts: 5, limit: 1, icon: 'ü§´' },
                { id: 'honesto', label: 'D√≠a honesto', pts: 5, limit: 1, icon: 'ü§ù' },
                { id: 'cama', label: 'Hacer la cama', pts: 1, limit: 1, icon: 'üõèÔ∏è' },
                { id: 'dormir', label: 'Dormir sola', pts: 1, limit: 1, icon: 'üåô' },
                { id: 'ba√±o', label: 'Ba√±arse Sola', pts: 1, limit: 1, icon: 'üöø' },
                { id: 'vestir', label: 'Vestirse Sola', pts: 1, limit: 1, icon: 'üëó' },
                { id: 'tarea', label: 'Tarea', pts: 1, limit: 1, icon: '‚úèÔ∏è' }
            ],

            rewards: [
                { label: 'Pel√≠cula Extra', pts: 100 },
                { label: 'Helado Especial', pts: 180 },
                { label: 'Regalo Sorpresa', pts: 400 },
                { label: 'Paseo + Regalo', pts: 800 }
            ],

            init() {
                const saved = localStorage.getItem('eva_kpop_v7');
                if (saved) this.data = JSON.parse(saved);
                
                const dateKey = new Date().toLocaleDateString();
                if (!this.data.today || this.data.today.date !== dateKey) {
                    this.data.today = { date: dateKey, completed: {} };
                }
                this.render();
            },

            save() {
                localStorage.setItem('eva_kpop_v7', JSON.stringify(this.data));
                this.render();
            },

            adjustPoints(taskId, amount) {
                const task = this.tasks.find(t => t.id === taskId);
                const currentCount = this.data.today.completed[taskId] || 0;
                
                if (amount > 0 && currentCount >= task.limit) return;
                if (amount < 0 && currentCount <= 0) return;

                this.data.today.completed[taskId] = currentCount + (amount > 0 ? 1 : -1);
                this.data.total += (amount > 0 ? task.pts : -task.pts);
                this.save();
            },

            quickAdjust(pts, label) {
                this.data.total += pts;
                this.save();
            },

            setTab(t) {
                this.data.tab = t;
                this.render();
            },

            render() {
                document.getElementById('total-pts').innerText = this.data.total;
                const el = document.getElementById('main-content');
                el.innerHTML = '';

                ['tasks', 'rewards'].forEach(t => {
                    const tabBtn = document.getElementById(`tab-${t}`);
                    if (tabBtn) {
                        tabBtn.className = this.data.tab === t 
                            ? 'flex-1 py-4 rounded-full font-black uppercase italic text-sm tracking-widest tab-active' 
                            : 'flex-1 py-4 rounded-full font-black uppercase italic text-sm tracking-widest opacity-40';
                    }
                });

                if (this.data.tab === 'tasks') {
                    this.tasks.forEach(t => {
                        const count = this.data.today.completed[t.id] || 0;
                        const isMaxed = count >= t.limit;
                        const div = document.createElement('div');
                        div.className = `glass-card p-5 rounded-[1.5rem] flex justify-between items-center ${isMaxed ? 'task-done' : ''}`;
                        div.innerHTML = `
                            <div class="flex items-center gap-4">
                                <span class="text-3xl">${t.icon}</span>
                                <div>
                                    <h3 class="font-bold uppercase italic label-lg">${t.label}</h3>
                                    <span class="text-pink-500 font-black uppercase text-xs tracking-tighter">${count} / ${t.limit} COMPLETADO</span>
                                </div>
                            </div>
                            <div class="flex gap-2">
                                <button onclick="App.adjustPoints('${t.id}', -1)" class="btn-control bg-white/10 rounded-xl font-bold">-</button>
                                <button onclick="App.adjustPoints('${t.id}', 1)" ${isMaxed ? 'disabled' : ''} class="btn-control btn-plus rounded-xl font-bold text-white">+</button>
                            </div>
                        `;
                        el.appendChild(div);
                    });
                } else if (this.data.tab === 'rewards') {
                    this.rewards.forEach(r => {
                        const prog = Math.min(100, (this.data.total / r.pts) * 100);
                        const div = document.createElement('div');
                        div.className = `glass-card p-6 rounded-[1.2rem] relative overflow-hidden`;
                        div.innerHTML = `
                            <div class="absolute top-0 left-0 h-full bg-pink-500/10" style="width: ${prog}%"></div>
                            <div class="relative z-10 flex justify-between items-center">
                                <div>
                                    <h4 class="font-bold label-lg uppercase italic">${r.label}</h4>
                                    <p class="text-base font-black text-pink-500">${r.pts} PUNTOS</p>
                                </div>
                                <div class="font-header text-2xl opacity-40">${Math.floor(prog)}%</div>
                            </div>
                        `;
                        el.appendChild(div);
                    });
                }
            }
        };

        window.onload = () => App.init();
    </script>
</body>
</html>
